<!-- UPDATED PROJECT FILES: HTML, CSS, JS -->
<!-- =============================== -->
<!-- ========== INDEX.HTML ========= -->
<!-- =============================== -->

<!-- Paste this entire HTML file over your existing index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roguelike VN Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="default-theme">

    <!-- MENU SCREEN -->
    <div id="menu-screen">
        <img id="logo" src="logo.png" alt="Game Logo">
        <h1>ROGUELIKE VN</h1>
        <p>A hybrid VN × roguelike adventure</p>

        <div class="menu-options">
            <button id="start-btn">Start Game</button>
            <button id="settings-btn" class="settings-button">Settings</button>
        </div>
    </div>

    <!-- CHARACTER SELECT -->
    <div id="character-select-screen" class="hidden">
        <h2>Select Your Character</h2>
        <div id="character-list"></div>
        <button id="confirm-character-btn">Confirm</button>
    </div>

    <!-- GAME SCREEN -->
    <div id="game-container" class="hidden">

        <!-- STATUS BAR -->
        <div id="status-bar">
            <div class="combat-status-box">
                <div class="health-bar-container" id="player-hp-bar">
                    <div class="health-bar" id="player-hp-fill"></div>
                </div>
            </div>
        </div>

        <div id="main-area">

            <!-- LEFT SIDE: Visuals + Enemy HP -->
            <div id="visual-panel">
                <div id="enemy-hp-bar" class="health-bar-container">
                    <div id="enemy-hp-fill" class="health-bar"></div>
                </div>

                <div id="animation-slot">Animation Here</div>

                <div id="location-box">
                    <h3 id="area-name">Unknown Area</h3>
                    <p id="area-description">Description goes here...</p>
                </div>
            </div>

            <!-- RIGHT SIDE: Combat Log -->
            <div id="combat-log"></div>
        </div>

        <!-- BOTTOM PANEL: Inventory + Attacks -->
        <div id="bottom-panel">
            <div id="inventory-box"></div>
            <div id="actions-box"></div>
        </div>

        <!-- PLAYER PORTRAIT + INFO -->
        <div id="player-portrait-box">
            <img id="player-portrait" src="img/player_stage_0.png">
            <button id="player-info-btn">i</button>
        </div>

        <!-- Character Info Modal -->
        <div id="character-info-modal" class="hidden">
            <div class="modal">
                <h2>Your Abilities</h2>
                <div id="ability-info-list"></div>
                <button id="close-info-btn">Close</button>
            </div>
        </div>

    </div>

    <script src="characters.js"></script>
    <script src="main.js"></script>
</body>
</html>


<!-- =============================== -->
<!-- ========== STYLES.CSS ========= -->
<!-- =============================== -->

/* Paste this entire CSS file over your existing one */

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.hidden { display: none !important; }

/* THEMES HERE (same as before, trimmed for space) */

/* COMPACT HP BARS */
.health-bar-container {
    width: 100px;
    height: 10px;
    background-color: var(--hp-bg);
    border: 1px solid var(--text-color);
    border-radius: 3px;
    overflow: hidden;
}

.health-bar {
    height: 100%;
    background-color: var(--hp-color);
    transition: width 0.3s ease-out;
}

/* MAIN LAYOUT */
#main-area {
    display: flex;
    width: 100%;
    height: 60vh;
}

#visual-panel {
    flex: 3;
    padding: 10px;
}

#combat-log {
    flex: 1;
    padding: 10px;
    border-left: 1px dashed var(--border-color);
    overflow-y: auto;
}

#animation-slot {
    height: 200px;
    border: 1px solid var(--border-color);
    margin-top: 10px;
}

#location-box {
    padding: 10px;
    border: 1px solid var(--border-color);
    margin-top: 10px;
}

/* BOTTOM PANEL */
#bottom-panel {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    padding: 10px;
}

/* PLAYER PORTRAIT */
#player-portrait-box {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    gap: 10px;
}

#player-portrait {
    width: 80px;
    height: 80px;
    border: 2px solid var(--border-color);
}

/* TOOLTIP ABILITIES */
.ability-btn:hover::after {
    content: attr(data-description);
    position: absolute;
    left: 100%;
    top: 0;
    width: 180px;
    padding: 6px;
    background: var(--status-bar-bg);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    z-index: 10;
}


<!-- =============================== -->
<!-- ======== CHARACTERS.JS ======== -->
<!-- =============================== -->

// Updated characters.js (structure only — fill with your characters)

const CHARACTERS = {
    warrior: {
        name: "Warrior",
        maxHP: 100,
        abilities: [
            { name: "Slash", description: "A basic melee attack.", power: 10 },
            { name: "Guard", description: "Reduce damage for 1 turn.", power: 0 }
        ]
    },
};


<!-- =============================== -->
<!-- ========== MAIN.JS ============ -->
<!-- =============================== -->

// Updated main.js with the new UI logic

let currentCharacter = null;
let enemy = { hp: 50, maxHP: 50 };

// ===========================
// CHARACTER SELECT
// ===========================

document.getElementById("start-btn").onclick = () => {
    document.getElementById("menu-screen").classList.add("hidden");
    document.getElementById("character-select-screen").classList.remove("hidden");
};

// Populate character list
const list = document.getElementById("character-list");
for (let key in CHARACTERS) {
    const char = CHARACTERS[key];
    const card = document.createElement("div");
    card.classList.add("char-card");
    card.innerHTML = `<h4>${char.name}</h4>`;
    card.onclick = () => {
        currentCharacter = CHARACTERS[key];
    };
    list.appendChild(card);
}

document.getElementById("confirm-character-btn").onclick = () => {
    if (!currentCharacter) return;

    document.getElementById("character-select-screen").classList.add("hidden");
    document.getElementById("game-container").classList.remove("hidden");

    updateHPBars();
    renderAbilities();
};

// ===========================
// HP BAR UPDATES
// ===========================
function updateHPBars() {
    document.getElementById("player-hp-fill").style.width = "100%";
    document.getElementById("enemy-hp-fill").style.width = `${enemy.hp / enemy.maxHP * 100}%`;
}

// ===========================
// ABILITY BUTTONS WITH TOOLTIPS
// ===========================
function renderAbilities() {
    const box = document.getElementById("actions-box");
    box.innerHTML = "";

    currentCharacter.abilities.forEach(a => {
        const btn = document.createElement("button");
        btn.classList.add("ability-btn");
        btn.textContent = a.name;
        btn.setAttribute("data-description", a.description);
        btn.onclick = () => {
            enemy.hp -= a.power;
            if (enemy.hp < 0) enemy.hp = 0;
            updateHPBars();
            log(`${currentCharacter.name} used ${a.name}!`);
        };
        box.appendChild(btn);
    });
}

// ===========================
// LOGGING
// ===========================
function log(text) {
    const logBox = document.getElementById("combat-log");
    const entry = document.createElement("div");
    entry.classList.add("log-entry");
    entry.textContent = text;
    logBox.appendChild(entry);
    logBox.scrollTop = logBox.scrollHeight;
}

// ===========================
// PORTRAIT DAMAGE UPDATE
// ===========================
function updatePortrait(hp, maxHP) {
    const pct = hp / maxHP;
    let stage = 0;
    if (pct < 0.25) stage = 3;
    else if (pct < 0.5) stage = 2;
    else if (pct < 0.75) stage = 1;

    document.getElementById("player-portrait").src = `img/player_stage_${stage}.png`;
}

// ===========================
// CHARACTER INFO MODAL
// ===========================
document.getElementById("player-info-btn").onclick = () => {
    const modal = document.getElementById("character-info-modal");
    const list = document.getElementById("ability-info-list");

    list.innerHTML = "";
    currentCharacter.abilities.forEach(a => {
        const p = document.createElement("p");
        p.innerHTML = `<strong>${a.name}</strong>: ${a.description}`;
        list.appendChild(p);
    });

    modal.classList.remove("hidden");
};

document.getElementById("close-info-btn").onclick = () => {
    document.getElementById("character-info-modal").classList.add("hidden");
};
