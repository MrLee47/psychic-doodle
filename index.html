<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Chronicles of Heroes: Erebos</title>

    <!-- Tailwind (optional, kept for existing classes) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Local stylesheet -->
    <link rel="stylesheet" href="styles.css">

    <style>
        /* small inline helpers for tooltip arrow alignment (kept here so tooltip shows even if CSS file delayed) */
        .ability-btn { position: relative; }
    </style>
</head>
<body class="default-theme">

    <!-- SETTINGS PANEL -->
    <div id="settings-panel" class="settings-panel hidden">
        <button class="close-btn" id="close-settings-btn">‚úï</button>
        <h2>Settings</h2>
        <div class="theme-selector">
            <h3>Themes</h3>
            <button class="theme-option-btn" data-theme="default">Default</button>
            <button class="theme-option-btn" data-theme="retro">Retro</button>
            <button class="theme-option-btn" data-theme="dark">Dark</button>
            <button class="theme-option-btn" data-theme="light">Light</button>
        </div>
    </div>

    <!-- MAIN MENU -->
    <div id="menu-screen" class="section-box" style="display:block;">
        <h1 id="logo">Chronicles of Heroes</h1>
        <p class="italic">Erebos ‚Äî a dungeon of shifting shadows.</p>
        <div class="menu-options">
            <button id="new-game-btn" class="action-btn">New Game</button>
            <button id="load-game-btn" class="action-btn" disabled>Load Game (WIP)</button>
            <button id="open-settings-menu-btn" class="action-btn">Settings</button>
        </div>
    </div>

    <!-- CHARACTER SELECT -->
    <div id="character-select-screen" class="section-box hidden">
        <h2>Select Your Hero</h2>
        <div id="character-list" class="grid"></div>
        <div class="text-center mt-4">
            <button id="start-combat-btn" class="action-btn hidden">Begin the Adventure!</button>
        </div>
    </div>

    <!-- GAME UI -->
    <div id="main-game-wrapper" class="section-box hidden">
        <!-- top status row -->
        <div id="status-bar" class="status-bar">
            <!-- player compact status -->
            <div class="combat-status-box">
                <div style="display:flex; align-items:center; gap:10px;">
                    <div id="player-portrait-box">
                        <img id="player-portrait" src="img/player_stage_0.png" alt="portrait" />
                        <button id="player-info-btn" class="action-btn" style="padding:6px 8px; font-size:0.9rem;">i</button>
                    </div>

                    <div style="min-width:220px;">
                        <div id="player-name" class="font-bold">Player Name</div>
                        <div class="health-bar-container" style="width:120px;height:10px;">
                            <div id="player-hp-bar" class="health-bar"></div>
                        </div>
                        <div style="font-size:0.8rem;" id="player-hp-text">100/100</div>
                    </div>
                </div>
            </div>

            <!-- center: area combined box -->
            <div id="location-box" style="flex:1; text-align:center;">
                <div id="area-display" class="font-semibold">Area: Erebos</div>
                <div id="area-desc" class="text-xs text-gray-600">A shadowed catacomb.</div>
            </div>

            <!-- actions / quick status -->
            <div style="display:flex; align-items:center; gap:12px;">
                <div id="room-progress-display" class="text-sm">Room 1/6</div>
                <button id="open-settings-btn" class="action-btn">‚öô</button>
            </div>
        </div>

        <!-- main content: animation area + log on right -->
        <div id="main-area">
            <!-- left: visuals and enemy HP on top -->
            <div id="visual-column" style="flex:2; display:flex; flex-direction:column; gap:8px; padding:12px;">
                <!-- Enemy HP above animation -->
                <div style="display:flex; justify-content:center;">
                    <div style="text-align:center;">
                        <div id="enemy-name" class="font-bold text-red-700">Enemy</div>
                        <div class="health-bar-container" style="width:160px; height:10px;">
                            <div id="enemy-hp-bar" class="health-bar"></div>
                        </div>
                        <div id="enemy-hp-text" style="font-size:0.8rem;">100/100</div>
                    </div>
                </div>

                <!-- animation slot (center) -->
                <div id="visuals-panel" class="section-box" style="flex:1; display:flex; align-items:center; justify-content:center; min-height:260px; position:relative;">
                    <div id="animation-slot" style="display:flex; gap:36px; align-items:center;">
                        <div id="player-sprite" class="text-center">
                            <span id="player-sprite-emoji" class="text-7xl">üõ°Ô∏è</span>
                            <p id="player-sprite-name" class="mt-2 font-bold">Hero</p>
                        </div>
                        <div id="enemy-sprite" class="text-center hidden">
                            <span id="enemy-sprite-emoji" class="text-7xl">üëπ</span>
                            <p id="enemy-sprite-name" class="mt-2 font-bold text-red-600">Enemy</p>
                        </div>
                    </div>

                    <!-- clash visualizer (overlay) -->
                    <div id="clash-visualizer" class="hidden overlay-center"></div>
                </div>

                <!-- combined description / dialogue -->
                <div id="dialogue-and-controls" style="display:flex; gap:12px;">
                    <div id="dialogue-box" style="flex:1;">
                        <div id="dialogue-text" class="section-box p-3" style="height:72px; overflow:hidden;">Welcome to the adventure!</div>
                    </div>

                    <!-- quick actions (pass / continue) -->
                    <div id="quick-actions" style="width:180px;">
                        <div class="section-box p-2">
                            <div id="action-header" class="font-semibold mb-2">Actions</div>
                            <div id="action-buttons" style="display:grid; grid-template-columns:1fr; gap:6px;"></div>
                            <button id="pass-turn-btn" class="action-btn mt-2 hidden">Pass Turn</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- right: thin tall event log -->
            <div id="log-column" style="width:260px; display:flex; flex-direction:column; gap:8px;">
                <div class="section-box p-2" style="height:100%; min-height:420px; overflow:hidden; display:flex; flex-direction:column;">
                    <div class="font-bold border-b pb-2 mb-2">Event Log</div>
                    <div id="combat-log" style="overflow-y:auto; flex:1; padding-right:6px;"></div>
                </div>

                <!-- inventory & abilities toggles (inventory left, attacks below) -->
                <div id="inventory-area" class="section-box p-2" style="height:160px; overflow:auto;">
                    <div class="font-semibold mb-2">Inventory</div>
                    <ul id="inventory-list" class="text-sm"></ul>
                </div>
            </div>
        </div>

        <!-- bottom row: inventory (left) and attack buttons (right) -->
        <div id="bottom-panel" style="display:grid; grid-template-columns:1fr 1fr; gap:8px; padding:12px;">
            <div id="left-bottom" class="section-box p-2">
                <div class="font-semibold">Your Items</div>
                <div id="inventory-display-compact" style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;"></div>
            </div>

            <div id="right-bottom" class="section-box p-2">
                <div class="font-semibold">Attacks / Abilities</div>
                <div id="ability-buttons-row" style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;"></div>
            </div>
        </div>
    </div>

    <!-- Character Info Modal -->
    <div id="character-info-modal" class="section-box hidden" style="position:fixed; right:20px; bottom:20px; width:360px; max-height:70vh; overflow:auto; padding:12px;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h3>Your Abilities</h3>
            <button id="close-character-info" class="action-btn" style="padding:6px 8px;">Close</button>
        </div>
        <div id="ability-info-list" style="margin-top:8px;"></div>
    </div>

    <!-- SCRIPTS -->
    <script src="characters.js"></script>
    <script src="main.js"></script>
</body>
</html>
